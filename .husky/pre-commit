#!/usr/bin/env sh

# 运行 lint-staged（只检查暂存的文件）
echo "🔍 正在检查暂存文件的代码质量..."
npx lint-staged

# 运行测试（只运行单元测试以加快速度）
echo "🧪 正在运行单元测试..."
if npm run test:unit; then
    echo "✅ 所有测试通过"
else
    echo "⚠️  测试失败，但允许提交（请尽快修复测试）"
fi